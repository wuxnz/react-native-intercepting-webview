/*
 * Library module build for react-native-intercepting-webview (android-lib)
 *
 * This module compiles the Java native sources into an AAR that can be autolinked
 * by host React Native applications.
 *
 * Keep runtime dependencies minimal: react-native and react-native-webview are
 * expected to be provided by the host app (declared as peerDependencies in package.json).
 */
plugins {
    id 'com.android.library'
    id 'maven-publish'
}

android {
    compileSdk 33

    namespace 'com.rnintercept'

    defaultConfig {
        minSdk 21
        targetSdk 33
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_11
        targetCompatibility JavaVersion.VERSION_11
    }

    // Optional: publishing configuration for AAR
    publishing {
        singleVariant('release') { withSourcesJar() }
    }
}

dependencies {
    // Provided by host app; keep as compileOnly to avoid bundling.
    compileOnly 'com.facebook.react:react-native:+'
    // NOTE: Do NOT declare a Maven dependency for react-native-webview here. The host app
    // provides react-native-webview (node_modules/react-native-webview) and autolinking / Gradle
    // of the host project will include it. Declaring a Maven artifact causes resolution errors
    // because react-native-webview is not published under this group in public Maven repos.
    //
    // If you need to compile this library locally against react-native-webview during development,
    // add the dependency in a local example app's settings or use the host app's node_modules.
}

/*
Notes:
- This module is intended to be detected by autolinking via react-native.config.js (pointing to ./android-lib).
- We'll add the native Java sources into android-lib/src/main/java/com/rnintercept in subsequent steps.
*/